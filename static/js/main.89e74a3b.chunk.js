(this["webpackJsonpsubstrate-front-end-template"]=this["webpackJsonpsubstrate-front-end-template"]||[]).push([[0],{570:function(e){e.exports=JSON.parse('{"APP_NAME":"substrate-front-end-tutorial","DEVELOPMENT_KEYRING":true,"RPC":{}}')},620:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://dev-node.substrate.dev"}')},621:function(e){e.exports=JSON.parse('{"Address":"MultiAddress","LookupSource":"MultiAddress","Name":"[u8;32]","APN":"[u8;32]","apn_value":"[u8;32]","atokens":"Balance","AccountInfo":"AccountInfoWithDualRefCount","Balance1":"u64","ApnToken":{"super_apn":"u32","agency_name":"Vec<u8>"},"Source":{"_enum":{"Id":"AccountId","Index":"AccountIndex","Raw":"Vec<u8>","Address32":"[u8;32]","Address20":"[u8;20]"}}}')},625:function(e,t){},645:function(e,t){},663:function(e,t){},666:function(e,t){},668:function(e,t){},678:function(e,t){},680:function(e,t){},710:function(e,t){},712:function(e,t){},719:function(e,t){},720:function(e,t){},806:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(140),s=n.n(c),o=(n(607),n(866)),i=n(892),u=n(4),l=function(){var e=[11.123,78.65];return Object(u.jsx)(o.a,{className:"map",center:[e[0],e[1]],zoom:5,children:Object(u.jsx)(i.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})},j=n(3),b=n(889),p=n(877),d=n(891),O=n(887),f=n(878),x=n(872),h=n(879),m=(n(609),n(16)),y=n.n(m),v=n(29),g=n(19),S=n(438),C=n(569),E=n.n(C),w=n(458),A=n(286),N=n(402),k=n.n(N),R=n(570),T=n(620),_=n(621),P=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-front-end-template",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-front-end-template",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),I=Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)({},R),T),P),{},{types:_}),D=E.a.parse(window.location.search).rpc||I.PROVIDER_SOCKET;console.log("Connected socket: ".concat(D));var F={socket:D,jsonrpc:Object(g.a)(Object(g.a)({},S.default),I.RPC),types:I.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},U=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(g.a)(Object(g.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(g.a)(Object(g.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(g.a)(Object(g.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(g.a)(Object(g.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(g.a)(Object(g.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(g.a)(Object(g.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(g.a)(Object(g.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},L=!1,M=a.a.createContext(),V=function(e){var t=Object(g.a)({},F);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(r.useReducer)(U,t),a=Object(j.a)(n,2),c=a[0],s=a[1];return function(e,t){var n=e.apiState,r=e.socket,a=e.jsonrpc,c=e.types;if(!n){t({type:"CONNECT_INIT"});var s=new w.WsProvider(r),o=new w.ApiPromise({provider:s,types:c,rpc:a});o.on("connected",(function(){t({type:"CONNECT",payload:o}),o.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),o.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),o.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(c,s),function(e,t){var n=function(){var e=Object(v.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(A.web3Enable)(I.APP_NAME);case 4:return e.next=6,Object(A.web3Accounts)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(g.a)(Object(g.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),k.a.loadAll({isDevelopment:I.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:k.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(L)return t({type:"SET_KEYRING",payload:k.a});L=!0,n()}}(c,s),Object(u.jsx)(M.Provider,{value:c,children:e.children})},G=function(){return Object(g.a)({},Object(r.useContext)(M))},H={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},X=n(21),B=n(849);function K(e){var t=e.accountPair,n=void 0===t?null:t,a=e.label,c=e.setStatus,s=e.afterSubmit,o=e.color,i=void 0===o?"blue":o,l=e.style,b=void 0===l?null:l,p=e.type,d=void 0===p?"QUERY":p,O=e.attrs,f=void 0===O?null:O,x=e.disabled,h=void 0!==x&&x,m=G().api,S=Object(r.useState)(null),C=Object(j.a)(S,2),E=C[0],w=C[1],N=Object(r.useState)(null),k=Object(j.a)(N,2),R=k[0],T=k[1],_=f.palletRpc,P=f.callable,I=f.inputParams,D=f.paramFields,F=function(){return"SUDO-TX"===d},U=function(){return"UNCHECKED-SUDO-TX"===d};Object(r.useEffect)((function(){Object(v.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&m.query.sudo){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m.query.sudo.key();case 4:(t=e.sent).isEmpty?T(null):T(t.toString());case 6:case"end":return e.stop()}}),e)})))()}),[m]);var L,M=function(){var e=Object(v.a)(y.a.mark((function e(){var t,r,a,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,r=n.meta,a=r.source,!r.isInjected){e.next=9;break}return e.next=4,Object(A.web3FromSource)(a);case 4:s=e.sent,c=t,m.setSigner(s.signer),e.next=10;break;case 9:c=n;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var t=e.status;return t.isFinalized?c("\ud83d\ude09 Finalized. Block hash: ".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))},K=function(e){return c("\ud83d\ude1e Transaction Failed: ".concat(e.toString()))},Y=function(){var e=Object(v.a)(y.a.mark((function e(){var t,n,r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n=e.sent,r=te(D,I),a=r?m.tx.sudo.sudo((t=m.tx[_])[P].apply(t,Object(X.a)(r))):m.tx.sudo.sudo(m.tx[_][P]()),c=a.signAndSend(n,V).catch(K),w((function(){return c}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(v.a)(y.a.mark((function e(){var t,n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n=e.sent,r=m.tx.sudo.sudoUncheckedWeight((t=m.tx[_])[P].apply(t,Object(X.a)(I)),0),a=r.signAndSend(n,V).catch(K),w((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(v.a)(y.a.mark((function e(){var t,n,r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return n=e.sent,r=te(D,I),console.log(r),a=r?(t=m.tx[_])[P].apply(t,Object(X.a)(r)):m.tx[_][P](),e.next=8,a.signAndSend(n,V).catch(K);case 8:c=e.sent,w((function(){return c}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(v.a)(y.a.mark((function e(){var t,n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te(D,I),r=n?(t=m.tx[_])[P].apply(t,Object(X.a)(n)):m.tx[_][P](),e.next=4,r.send(V).catch(K);case 4:a=e.sent,w((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){return e.isNone?c("None"):c(e.toString())},Q=function(){var e=Object(v.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te(D,I),e.next=3,(t=m.query[_])[P].apply(t,Object(X.a)(n).concat([J]));case 3:r=e.sent,w((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(v.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te(D,I,{emptyAsNull:!1}),e.next=3,(t=m.rpc[_])[P].apply(t,Object(X.a)(n).concat([J]));case 3:r=e.sent,w((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=m.consts[_][P];e.isNone?c("None"):c(e.toString())},ee=function(){var e=Object(v.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&(E(),w(null)),c("Sending..."),!F()){e.next=8;break}return console.log("isSudo"),e.next=6,Y();case 6:e.next=42;break;case 8:if(!U()){e.next=14;break}return console.log("isUncheckedSudo"),e.next=12,z();case 12:e.next=42;break;case 14:if("SIGNED-TX"!==d){e.next=20;break}return console.log("isSigned"),e.next=18,q();case 18:e.next=42;break;case 20:if("UNSIGNED-TX"!==d){e.next=26;break}return console.log("isUnsigned"),e.next=24,W();case 24:e.next=42;break;case 26:if("QUERY"!==d){e.next=32;break}return console.log("isQuery"),e.next=30,Q();case 30:e.next=42;break;case 32:if("RPC"!==d){e.next=38;break}return console.log("isRpc"),e.next=36,Z();case 36:e.next=42;break;case 38:if("CONSTANT"!==d){e.next=42;break}return console.log("isConstant"),e.next=42,$();case 42:"function"===typeof s&&s();case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{emptyAsNull:!0},r=t.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e&&e.value instanceof Object.getPrototypeOf(Uint8Array)?e.value:e})),a=e.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{value:r[t]||null})}));return a.reduce((function(e,t){var r=t.type,a=void 0===r?"string":r,c=t.value;if(null==c||""===c)return n.emptyAsNull?[].concat(Object(X.a)(e),[null]):e;var s=c;return a.indexOf("Vec<")>=0?(s=(s=s.split(",").map((function(e){return e.trim()}))).map((function(e){return ne(a)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(X.a)(e),[s])):(ne(a)&&(s=s.indexOf(".")>=0?Number.parseFloat(s):Number.parseInt(s)),[].concat(Object(X.a)(e),[s]))}),[])},ne=function(e){return"[u8;32]"!==e&&H.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))};return Object(u.jsx)(B.a,{basic:!0,color:i,style:b,type:"submit",onClick:ee,disabled:h||!_||!P||!(0===D.length||D.every((function(e,t){var n=I[t];if(e.optional)return!0;if(null==n)return!1;var r="object"===typeof n?n.value:n;return null!==r&&""!==r})))||(F()||U())&&(L=n,!(R&&L&&L.address===R)),children:a})}function Y(e){var t=G(),r=t.api,a=t.apiState,c=t.keyring,s=t.keyringState;return"READY"===a&&(window.api=r),"READY"===s&&(window.keyring=c),window.util=n(0),window.utilCrypto=n(23),null}var z=n(386),q=n(881),W=n(589),J=n(880),Q=(n(289),n(189));function Z(e){var t=G().keyring,n=e.setAccountAddress,a=Object(r.useState)(""),c=Object(j.a)(a,2),s=c[0],o=c[1],i=t.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),l=i.length>0?i[0].value:"";Object(r.useEffect)((function(){n(l),o(l)}),[n,l]);return Object(u.jsx)(q.a,{attached:"top",tabular:!0,style:{backgroundColor:"#fdf7f2",borderColor:"#000000",paddingTop:"0.5em",paddingBottom:"0.5em"},children:Object(u.jsxs)(x.a,{children:[Object(u.jsx)(q.a.Menu,{children:Object(u.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://basinlogix.com",children:Object(u.jsx)(W.a,{src:"".concat("/substrate-front-end-template","/assets/basinlogix_full_logo_transparent1.png"),size:"medium"})})}),Object(u.jsxs)(q.a.Menu,{position:"right",style:{alignItems:"center"},children:[s?null:Object(u.jsxs)("span",{children:["Add your account with the"," ",Object(u.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/polkadot-js/extension",children:"Polkadot JS Extension"})]}),Object(u.jsx)(z.CopyToClipboard,{text:s,children:Object(u.jsx)(B.a,{basic:!0,circular:!0,size:"large",icon:"user",color:s?"green":"red"})}),Object(u.jsx)(J.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select an account",options:i,onChange:function(e,t){var r;r=t.value,n(r),o(r)},value:s})]})]})})}function $(e){var t=G(),n=t.api;return t.keyring.getPairs&&n.query?Object(u.jsx)(Z,Object(g.a)({},e)):null}var ee=n(34),te=n(884);function ne(e){var t=G().api,n=e.finalized,a=Object(r.useState)(0),c=Object(j.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)(0),l=Object(j.a)(i,2),b=l[0],p=l[1],O=n?t.derive.chain.bestNumberFinalized:t.derive.chain.bestNumber;Object(r.useEffect)((function(){var e=null;return O((function(e){o(e.toNumber()),p(0)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[O]);var f=function(){p((function(e){return e+1}))};return Object(r.useEffect)((function(){var e=setInterval(f,1e3);return function(){return clearInterval(e)}}),[]),Object(u.jsx)(d.a.Column,{children:Object(u.jsxs)("div",{style:{display:"inline"},children:[Object(u.jsx)("b",{children:(n?"Finalized":"Current")+" Block "+s+": "}),Object(u.jsx)(Q.a,{name:"time"})," ",b]})})}function re(e){var t=G().api;return t.derive&&t.derive.chain&&t.derive.chain.bestNumber&&t.derive.chain.bestNumberFinalized?Object(u.jsx)(ne,Object(g.a)({},e)):null}var ae=n(883),ce=['system:ExtrinsicSuccess:: (phase={"ApplyExtrinsic":0})','system:ExtrinsicSuccess:: (phase={"ApplyExtrinsic":1})'];function se(e){var t=G().api,n=Object(r.useState)([]),a=Object(j.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){var e=null;return function(){var n=Object(v.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.query.system.events((function(e){e.forEach((function(e){var t=e.event,n=e.phase,r=t.typeDef,a="".concat(t.section,":").concat(t.method,":: (phase=").concat(n.toString(),")");if(!ce.includes(a)){var c=t.data.map((function(e,t){return"".concat(r[t].type,": ").concat(e.toString())}));s((function(e){return[{icon:"bell",summary:"".concat(a,"-").concat(e.length),extraText:t.meta.documentation.join(", ").toString(),content:c.join(", ")}].concat(Object(X.a)(e))}))}}))}));case 2:e=n.sent;case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){return e&&e()}}),[t.query.system]);var o=e.feedMaxHeight,i=void 0===o?250:o;return Object(u.jsxs)(d.a.Column,{width:8,children:[Object(u.jsx)("h1",{style:{float:"left"},children:"Events"}),Object(u.jsx)(B.a,{basic:!0,circular:!0,size:"mini",color:"grey",floated:"right",icon:"erase",onClick:function(e){return s([])}}),Object(u.jsx)(ae.a,{style:{clear:"both",overflow:"auto",maxHeight:i},events:c})]})}function oe(e){var t=G().api;return t.query&&t.query.system&&t.query.system.events?Object(u.jsx)(se,Object(g.a)({},e)):null}var ie=n(882),ue=n(874);var le=n(885);function je(e){var t=G().api,n=Object(r.useState)({data:null,version:null}),a=Object(j.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){(function(){var e=Object(v.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.rpc.state.getMetadata();case 3:n=e.sent,s({data:n,version:n.version}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t.rpc.state]),Object(u.jsx)(d.a.Column,{children:Object(u.jsxs)("div",{style:{display:"inline"},children:[Object(u.jsx)("b",{children:"Metadata: "}),"v"+c.version+" ",Object(u.jsxs)(le.a,{trigger:Object(u.jsx)(B.a,{compact:!0,circular:!0,icon:"settings",size:"mini"}),children:[Object(u.jsx)(le.a.Header,{children:"Runtime Metadata"}),Object(u.jsx)(le.a.Content,{scrolling:!0,children:Object(u.jsx)(le.a.Description,{children:Object(u.jsx)("pre",{children:Object(u.jsx)("code",{children:JSON.stringify(c.data,null,2)})})})})]})]})})}function be(e){var t=G().api;return t.rpc&&t.rpc.state&&t.rpc.state.getMetadata?Object(u.jsx)(je,Object(g.a)({},e)):null}function pe(e){var t=G(),n=t.api,a=(t.socket,Object(r.useState)({})),c=Object(j.a)(a,2),s=c[0],o=c[1];return Object(r.useEffect)((function(){(function(){var e=Object(v.a)(y.a.mark((function e(){var t,r,a,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.rpc.system.chain(),n.rpc.system.name(),n.rpc.system.version()]);case 3:t=e.sent,r=Object(j.a)(t,3),a=r[0],c=r[1],s=r[2],o({chain:a,nodeName:c,nodeVersion:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n.rpc.system]),Object(u.jsx)(d.a.Column,{children:Object(u.jsxs)("div",{style:{display:"inline"},children:[Object(u.jsx)(Q.a,{name:"setting"}),"v",s.nodeVersion]})})}function de(e){var t=G().api;return t.rpc&&t.rpc.system&&t.rpc.system.chain&&t.rpc.system.name&&t.rpc.system.version?Object(u.jsx)(pe,Object(g.a)({},e)):null}n(886),n(888);function Oe(e){for(var t="",n=0;n<e.length;n++){t+="3"+e[n]}for(var r="",a=0;a<64-t.length;a++)r+="0";return r+=t}function fe(e,t){void 0!==e&&null!==e||(e="");for(var n=new Uint8Array(e.length),r=0;r<n.length;r++)n[r]=e.charCodeAt(r);for(var a=String.fromCharCode.apply(String,Object(X.a)(new Uint8Array(n.buffer))),c=32-a.length,s=new Uint8Array(32),o=0;o<32;o++)if(!(o<c)){var i=-1*(c-o);s[o]=a.charCodeAt(i)}if(t){var u=new Uint8Array(33);u[0]=3;for(var l=0;l<32;l++)u[l+1]=s[l];return u}return s}function xe(e){void 0===e&&(e="");for(var t="",n=!0,r=0;r<e.length;r++){var a=e[r];if(n){if("0"===a)continue;n=!1}t+=a}for(var c=[],s=0;s<t.length;s+=2)c.push([t[s],t[s+1]]);for(var o="",i=0;i<c.length;i++){o+=c[i][1]}return o}function he(e){var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)({addressFrom:null,addressTo:null,amount:0}),o=Object(j.a)(s,2),i=o[0],l=o[1],b=e.accountPair,p=function(e,t){l((function(e){return Object(g.a)(Object(g.a)({},e),{},Object(ee.a)({},t.state,t.value))})),h(fe(C,!0)),S(fe(E,!0))},O=Object(r.useState)(""),f=Object(j.a)(O,2),x=f[0],h=f[1],m=Object(r.useState)(""),y=Object(j.a)(m,2),v=y[0],S=y[1],C=i.addressFrom,E=i.addressTo,w=i.amount;return Object(u.jsxs)(d.a.Column,{width:8,children:[Object(u.jsx)("h1",{children:"Water Transfer"}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(ie.a.Field,{children:Object(u.jsx)(ue.a,{fluid:!0,label:"From",type:"text",placeholder:"address",state:"addressFrom",onChange:p})}),Object(u.jsx)(ie.a.Field,{children:Object(u.jsx)(ue.a,{fluid:!0,label:"To",type:"text",placeholder:"address",state:"addressTo",onChange:p})}),Object(u.jsx)(ie.a.Field,{children:Object(u.jsx)(ue.a,{fluid:!0,label:"Amount",type:"number",state:"amount",onChange:p})}),Object(u.jsx)(ie.a.Field,{style:{textAlign:"center"},children:Object(u.jsx)(K,{accountPair:b,label:"Submit",type:"SIGNED-TX",setStatus:c,attrs:{palletRpc:"allocator",callable:"tradeTokens",inputParams:["0",{type:"Source",value:x},{type:"Source",value:v},w],interxType:"EXTRINSIC",paramFields:[{name:"assetID",type:"AssetId"},{name:"fromapn",type:"Source"},{name:"toapn",type:"Source"},{name:"amt",type:"Balance1"}]}})}),Object(u.jsx)("div",{style:{overflowWrap:"break-word"},children:a})]})]})}var me=n(873),ye=[{type:"ProxyType",value:"Any"},{type:"BlockNumber",value:"0"},{type:"u16",value:"0"},{type:"[u8;32]",value:""}];function ve(e){var t=e.apnData,n=Object(r.useState)(null),a=Object(j.a)(n,2),c=(a[0],a[1]),s=Object(r.useState)(!1),o=Object(j.a)(s,2),i=o[0],l=o[1],b=Object(r.useState)([].concat(ye)),p=Object(j.a)(b,2),d=p[0],O=p[1];return Object(r.useEffect)((function(){if(t){var e=[].concat(ye),n=t.apn&&t.apn.toString();e[3].value=n&&fe(n),O(e)}}),[t]),Object(u.jsxs)("span",{children:[t&&t.apn?Object(u.jsx)(K,Object(g.a)({label:"Claim APN",type:"SIGNED-TX",color:"blue",setStatus:c,afterSubmit:function(){l(!0)},attrs:{palletRpc:"claimer",callable:"createApnAccount",inputParams:d,interxType:"EXTRINSIC",paramFields:[{name:"proxy_type",type:"ProxyType",optional:!1},{name:"delay",type:"BlockNumber",optional:!1},{name:"index",type:"u8",optional:!1},{name:"apn_value",type:"[u8;32]",optional:!1}]}},e)):null,Object(u.jsxs)(le.a,{onClose:function(){return l(!1)},open:i,children:[Object(u.jsx)(le.a.Header,{children:"APN has been claimed"}),Object(u.jsx)(le.a.Actions,{children:Object(u.jsx)(B.a,{content:"OK",labelPosition:"right",icon:"checkmark",onClick:function(){return l(!1)},positive:!0})})]})]})}function ge(e){return Object(u.jsx)(ve,Object(g.a)({},e))}function Se(e){var t=G().api,n=Object(r.useState)(""),a=Object(j.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)({}),i=Object(j.a)(o,2),l=i[0],b=i[1],p=function(){var n=Object(v.a)(y.a.mark((function n(){var r,a,s,o,i,u,l,j,p;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/apn/"+c);case 2:return r=n.sent,n.next=5,r.json();case 5:return a=n.sent,n.next=8,fetch("/apn/list/"+c);case 8:return s=n.sent,n.next=11,s.json();case 11:if(o=n.sent,!(s.ok&&o&&r.ok&&a)){n.next=34;break}return i="0x"+Oe(o[0].apn),n.prev=14,n.next=17,t.query.claimer.lookup(i);case 17:return l=n.sent,console.log(l.toHuman()),n.next=21,t.query.claimer.proxies(l.toHuman());case 21:j=n.sent,p=j[0]&&j[0].toHuman(),u=p&&p[0]&&p[0].delegate,n.next=29;break;case 26:n.prev=26,n.t0=n.catch(14),console.log(n.t0);case 29:u===e.accountAddress&&(o.owner=!0),b(o[0]),"function"===typeof e.apnFound&&e.apnFound(o),n.next=35;break;case 34:alert("could not find APN");case 35:case"end":return n.stop()}}),n,null,[[14,26]])})));return function(){return n.apply(this,arguments)}}();return Object(u.jsx)(d.a.Row,{width:8,children:Object(u.jsxs)(d.a.Column,{width:4,children:[Object(u.jsx)("h1",{children:"APN Search"}),Object(u.jsx)(ie.a,{onSubmit:p,children:Object(u.jsxs)(ie.a.Field,{children:[Object(u.jsx)(ue.a,{placeholder:"Assessor Parcel Number (APN)",fluid:!0,type:"text",style:{paddingBottom:"10px"},state:c,value:c,onChange:function(e,t){s(t.value)}}),Object(u.jsxs)(d.a,{children:[Object(u.jsx)(d.a.Column,{floated:"left",width:8,children:Object(u.jsx)(B.a,{type:"submit",style:{width:"100%"},children:"Search"})}),Object(u.jsx)(d.a.Column,{floated:"right",width:8,children:Object(u.jsx)(ge,Object(g.a)({style:{width:"100%"},apnData:l},e),c)})]})]})})]})})}function Ce(e){return Object(u.jsx)(Se,Object(g.a)({},e))}function Ee(e){var t=function(t){var n=t.coords;e.setMapBounds(function(e){for(var t=-1*Number.MAX_VALUE,n=Number.MAX_VALUE,r=-1*Number.MAX_VALUE,a=Number.MAX_VALUE,c=0;c<e.length;c++){var s=e[c][0],o=e[c][1];s>r&&(r=s),s<a&&(a=s),o>t&&(t=o),o<n&&(n=o)}return t<-180||r<-360||n>180||a>360?[[37.907506579631,-121.223565024536],[37.9296422893884,-121.038149460093]]:[[t,r],[n,a]]}(n))},n=e.apnStatusList.map((function(n){return Object(u.jsxs)(te.a.Row,{children:[Object(u.jsx)(te.a.Cell,{onClick:function(){t(n)},className:"js-link",children:n.apn}),Object(u.jsx)(te.a.Cell,{children:e.isRegulator?n.alloc<10?Object(u.jsx)(W.a,{src:"".concat("/substrate-front-end-template","/assets/red-cross-mark.png"),height:"19"}):Object(u.jsx)(W.a,{src:"".concat("/substrate-front-end-template","/assets/white-green-check.svg"),height:"19"}):n.alloc})]},n.apn)}));return Object(u.jsxs)(te.a,{celled:!0,children:[Object(u.jsx)(te.a.Header,{children:Object(u.jsxs)(te.a.Row,{children:[Object(u.jsx)(te.a.HeaderCell,{children:"APN"}),Object(u.jsx)(te.a.HeaderCell,{children:e.isRegulator?"Compliant":"Allocation (ACFT)"})]})}),Object(u.jsx)(te.a.Body,{children:n})]})}function we(e){return Object(u.jsx)(Ee,Object(g.a)({},e))}function Ae(e){var t=G().api;Object(r.useEffect)((function(){n()}),[e.isRegulator,e.accountAddress]);var n=function(){var n=Object(v.a)(y.a.mark((function n(){var r,a,c,s,o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"0x2df95c7f7f0d67daa549602785d7beae891ad457bf4da54990fa84a2acb148a2",n.next=3,t.rpc.state.getKeysPaged("0x2df95c7f7f0d67daa549602785d7beae891ad457bf4da54990fa84a2acb148a2",1e3);case 3:return r=n.sent,console.log("Calling RPC with `getKeys(0)`, got response: "),n.next=7,Promise.all(r.map(function(){var e=Object(v.a)(y.a.mark((function e(n){var r,a,c,s,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.toHex(),r=n.slice(-64),e.next=4,t.query.claimer.lookup("0x".concat(r));case 4:return a=e.sent,e.next=7,t.query.claimer.proxies(a.toHuman());case 7:return c=e.sent,s=c[0]&&c[0].toHuman(),o=s&&s[0]&&s[0].delegate,e.abrupt("return",{apn:xe(r),owner:o,proxy:a.toHuman()});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:if(a=n.sent,(c=a.map((function(e){return e.apn})))&&c.length){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,fetch("/apn/list/"+c.join(","));case 13:if(!(s=n.sent).ok){n.next=19;break}return n.next=17,s.json();case 17:o=n.sent,"function"===typeof e.apnListFound&&e.apnListFound(o.map((function(t){var n=a.find((function(n){return(e.isRegulator||n.owner===e.accountAddress)&&n.apn===t.apn.toString()}));return n&&(t.owner=n),t})));case 19:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(u.jsx)(ie.a,{onSubmit:n,children:Object(u.jsx)(B.a,{type:"submit",children:"Refresh"})})}function Ne(e){return Object(u.jsx)(Ae,Object(g.a)({},e))}var ke=n(875),Re=n(876);function Te(e){var t=e.mapCenter,n=e.mapZoom,a=e.mapBounds,c=e.parcelInfo,s=Object(ke.a)(),o=Object(r.useState)(1),l=Object(j.a)(o,2),b=l[0],p=l[1];return Object(r.useEffect)((function(){s.setView(t,n)}),[t,n]),Object(r.useEffect)((function(){s.fitBounds(a)}),[a]),Object(r.useEffect)((function(){console.log(c),p(b+1)}),[c]),Object(u.jsxs)("div",{children:[Object(u.jsx)(i.a,{attribution:"2021 Google Maps",url:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",opacity:.7}),Object(u.jsx)(Re.a,{data:c,style:function(e){return{color:"#1f2021",weight:1,fillOpacity:.65,fillColor:e.properties&&e.properties.owner?"#2450ff":"#999999"}},onEachFeature:function(e,t){var n='\n    <div style="overflow-wrap:auto;white-space: nowrap;">\n    <h3>APN Information</h3>\n    <pre><b>APN</b>: <br />'.concat(e.properties.apn,"</pre>\n    <pre><b>Crop</b>: <br />").concat(e.properties.crop2016,"</pre>\n    <pre><b>Groundwater Sustainability Agency</b>: <br />").concat(e.properties.agency_name,"</pre>\n    <pre><b>County</b>: <br />").concat(e.properties.county,"</pre>\n    <pre><b>Area Acres</b>: <br />").concat(e.properties.acres,"</pre>\n    <pre><b>Geometric Area</b>: <br />").concat(e.properties.shape_area,"</pre>");t.bindPopup(n,{maxWidth:"auto"})}},b)]})}function _e(e){return Object(u.jsx)(Te,Object(g.a)({},e))}function Pe(e){G().api;var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=(n[0],n[1]),c=e.apnList.reduce((function(e,t){return t.owner?(e.find((function(e){return e.owner.apn===t.owner.apn}))||e.push(t),e):e}),[]).map((function(e){return e.owner&&e.owner.proxy})).filter((function(e){return e}));return Object(u.jsx)(d.a.Row,{width:8,children:Object(u.jsx)(d.a.Column,{width:4,children:Object(u.jsx)(K,Object(g.a)({label:"Distribute Allocation",type:"SIGNED-TX",color:"blue",style:{position:"absolute",right:1,top:1},setStatus:a,attrs:{palletRpc:"allocator",callable:"issueTokenAirdrop",inputParams:[{type:"Vec<AccountId>",value:c.join(",")},{type:"Balance1",value:"100"}],interxType:"EXTRINSIC",paramFields:[{type:"Vec<AccountId>",name:"apn",optional:!1},{type:"Balance1",name:"atokens",optional:!1}]}},e))})})}function Ie(e){return Object(u.jsx)(Pe,Object(g.a)({},e))}var De={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]};function Fe(e){var t=G().api,n=Object(r.useState)({}),a=Object(j.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)({}),l=Object(j.a)(i,2),b=l[0],p=l[1],O=Object(r.useState)({}),f=Object(j.a)(O,2),x=f[0],h=f[1],m=Object(r.useState)({}),S=Object(j.a)(m,2),C=S[0],E=S[1],w=Object(r.useState)({lat:37.975438,lng:-121.27407}),A=Object(j.a)(w,2),N=A[0],k=(A[1],Object(r.useState)(12)),R=Object(j.a)(k,2),T=R[0],_=(R[1],Object(r.useState)([[37.995438,-121.17407],[37.905438,-121.29407]])),P=Object(j.a)(_,2),I=P[0],D=P[1],F=Object(r.useState)(Object(g.a)({},De)),U=Object(j.a)(F,2),L=U[0],M=U[1],V=Object(r.useState)([]),H=Object(j.a)(V,2),X=H[0],B=H[1],K=Object(r.useState)([]),Y=Object(j.a)(K,2),z=Y[0],q=Y[1],W=Object(r.useState)(!1),J=Object(j.a)(W,2),Q=J[0],Z=J[1],$=function(){var e=Object(v.a)(y.a.mark((function e(n){var r,a,c,s,o,i,u,l,j,b,p,d,O,f,x,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(B(n),r=[],a=-1*Number.MAX_VALUE,c=Number.MAX_VALUE,s=-1*Number.MAX_VALUE,o=Number.MAX_VALUE,i=0;i<n.length;i++){for(u=n[i],l=ee(u.geometry),j=0;j<l.length;j++)b=l[j][0],p=l[j][1],b>s&&(s=b),b<o&&(o=b),p>a&&(a=p),p<c&&(c=p);r.push({type:"Feature",properties:u,geometry:{type:"Polygon",coordinates:[l]}})}D(a<-180||s<-360||c>180||o>360?[[37.907506579631,-121.223565024536],[37.9296422893884,-121.038149460093]]:[[a,s],[c,o]]),M((function(e){return Object(g.a)(Object(g.a)({},e),{},{features:r})})),d=n.reduce((function(e,t){return t.owner?(e.find((function(e){return e.owner.apn===t.owner.apn}))||(t.coords=ee(t.geometry),e.push(t)),e):e}),[]),O=[],e.prev=12,f=0;case 14:if(!(f<d.length)){e.next=25;break}if((x=d[f]).owner){e.next=18;break}return e.abrupt("continue",22);case 18:return e.next=20,t.query.allocator.balances(0,x.owner.proxy);case 20:h=e.sent,O.push({alloc:h.toHuman(),apn:x.owner.apn,coords:x.coords});case 22:f++,e.next=14;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(12),console.log(e.t0);case 30:q(O);case 31:case"end":return e.stop()}}),e,null,[[12,27]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){return 0===e.indexOf("POLYGON((")&&(e=e.slice("POLYGON((".length)),e.indexOf("))")===e.length-2&&(e=e.slice(0,-2)),e.split(",").map((function(e){return e.split(" ").map((function(e){return Number(e.trim())}))}))};return Object(u.jsxs)("div",{style:{width:"100%"},children:[Object(u.jsx)(d.a,{columns:2,children:Object(u.jsxs)(d.a.Row,{children:[Object(u.jsx)(d.a.Column,{floated:"left",children:Object(u.jsx)("h1",{children:Object(u.jsx)("br",{})})}),Object(u.jsx)(d.a.Column,{floated:"right",children:Q?Object(u.jsx)(Ie,Object(g.a)({apnList:X},e)):""})]})}),Object(u.jsxs)(d.a,{children:[Object(u.jsxs)(d.a.Column,{width:12,children:[Object(u.jsx)(o.a,{center:[37.975438,-121.27407],zoom:12,style:{minHeight:"44rem",width:"100%"},children:Object(u.jsx)(_e,{mapCenter:N,mapZoom:T,mapBounds:I,parcelInfo:L})}),Object(u.jsx)("h1",{children:"Land Parcel Data"}),Object(u.jsx)("div",{style:{width:"100%",minHeight:"10rem"},children:Object(u.jsx)(te.a,{celled:!0,children:Object(u.jsxs)(te.a.Body,{children:[Object(u.jsxs)(te.a.Row,{children:[Object(u.jsx)(te.a.Cell,{children:"Assessor Parcel Number (APN)"}),Object(u.jsx)(te.a.Cell,{children:c.apn}),Object(u.jsx)(te.a.Cell,{children:b.apn}),Object(u.jsx)(te.a.Cell,{children:x.apn}),Object(u.jsx)(te.a.Cell,{children:C.apn})]}),Object(u.jsxs)(te.a.Row,{children:[Object(u.jsx)(te.a.Cell,{children:"Crop"}),Object(u.jsx)(te.a.Cell,{children:c.crop2016}),Object(u.jsx)(te.a.Cell,{children:b.crop2016}),Object(u.jsx)(te.a.Cell,{children:x.crop2016}),Object(u.jsx)(te.a.Cell,{children:C.crop2016})]}),Object(u.jsxs)(te.a.Row,{children:[Object(u.jsx)(te.a.Cell,{children:"Groundwater Sustainability Agency"}),Object(u.jsx)(te.a.Cell,{children:c.agency_name}),Object(u.jsx)(te.a.Cell,{children:b.agency_name}),Object(u.jsx)(te.a.Cell,{children:x.agency_name}),Object(u.jsx)(te.a.Cell,{children:C.agency_name})]}),Object(u.jsxs)(te.a.Row,{children:[Object(u.jsx)(te.a.Cell,{children:"County"}),Object(u.jsx)(te.a.Cell,{children:c.county}),Object(u.jsx)(te.a.Cell,{children:b.county}),Object(u.jsx)(te.a.Cell,{children:x.county}),Object(u.jsx)(te.a.Cell,{children:C.county})]}),Object(u.jsxs)(te.a.Row,{children:[Object(u.jsx)(te.a.Cell,{children:"Area Acres"}),Object(u.jsx)(te.a.Cell,{children:c.acres}),Object(u.jsx)(te.a.Cell,{children:b.acres}),Object(u.jsx)(te.a.Cell,{children:x.acres}),Object(u.jsx)(te.a.Cell,{children:C.acres})]})]})})})]}),Object(u.jsxs)(d.a.Column,{width:4,children:[Object(u.jsx)(d.a,{columns:2,children:Object(u.jsxs)(d.a.Row,{children:[Object(u.jsx)(d.a.Column,{floated:"left",children:Object(u.jsx)(Ne,{apnListFound:$,accountAddress:e.accountAddress,isRegulator:Q})}),Object(u.jsx)(d.a.Column,{floated:"right",children:Object(u.jsx)(me.a,{toggle:!0,label:"Regulator View",checked:Q,onChange:function(e,t){Z(!Q)}})})]})}),Object(u.jsx)("h1",{children:"Water Allocation"}),Object(u.jsx)(we,Object(g.a)({apnStatusList:z,isRegulator:Q,setMapBounds:D},e)),Object(u.jsx)(Ce,Object(g.a)({apnFound:function(e){s(e[0]||{}),p(e[1]||{}),h(e[2]||{}),E(e[3]||{});for(var t=[],n=-1*Number.MAX_VALUE,r=Number.MAX_VALUE,a=-1*Number.MAX_VALUE,c=Number.MAX_VALUE,o=0;o<e.length;o++){for(var i=e[o],u=ee(i.geometry),l=0;l<u.length;l++){var j=u[l][0],b=u[l][1];j>a&&(a=j),j<c&&(c=j),b>n&&(n=b),b<r&&(r=b)}t.push({type:"Feature",properties:i,geometry:{type:"Polygon",coordinates:[u]}})}D(n<-90||a<-180||r>90||c>180?[[37.907506579631,-121.223565024536],[37.9296422893884,-121.038149460093]]:[[n,a],[r,c]]),M((function(e){return Object(g.a)(Object(g.a)({},e),{},{features:t})}))}},e)),Object(u.jsx)("div",{style:{marginTop:"2rem"},children:Object(u.jsx)(he,Object(g.a)({},e))})]})]})]})}function Ue(e){return Object(u.jsx)(Fe,Object(g.a)({},e))}function Le(e){var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)({addressFrom:null,addressTo:null,amount:0}),o=Object(j.a)(s,2),i=(o[0],o[1],e.accountPair),l=G(),b=(l.apiState,l.keyring),p=l.keyringState,O=(l.apiError,b.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}}))),f=O.length>0?O[0].value:"",x=f&&"READY"===p&&b.getPair(f);return i?Object(u.jsxs)(d.a.Column,{width:8,children:[Object(u.jsx)("h1",{children:"Register Injected Account on BLX"}),Object(u.jsxs)(ie.a,{children:[Object(u.jsx)(ie.a.Field,{style:{textAlign:"center"},children:Object(u.jsx)(K,{accountPair:x,label:"Submit",type:"SIGNED-TX",setStatus:c,attrs:{palletRpc:"balances",callable:"transfer",inputParams:[i.address,1e15],interxType:"EXTRINSIC",paramFields:[!0,!0]}})}),Object(u.jsx)("div",{style:{overflowWrap:"break-word"},children:a})]})]}):null}function Me(){var e,t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],c=n[1],s=G(),o=s.apiState,i=s.keyring,l=s.keyringState,m=s.apiError,y=a&&"READY"===l&&i.getPair(a),v=function(e){return Object(u.jsx)(b.a,{active:!0,children:Object(u.jsx)(p.a,{size:"small",children:e})})};if("ERROR"===o)return e=m,Object(u.jsx)(d.a,{centered:!0,columns:2,padded:!0,children:Object(u.jsx)(d.a.Column,{children:Object(u.jsx)(O.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(e)})})});if("READY"!==o)return v("Connecting to Substrate");if("READY"!==l)return v("Loading accounts (please review any extension's authorization)");var g=Object(r.createRef)();return document.body.style="background: #fdf7f2;",Object(u.jsxs)("div",{ref:g,children:[Object(u.jsx)(f.a,{context:g,children:Object(u.jsx)($,{setAccountAddress:c})}),Object(u.jsx)(x.a,{children:Object(u.jsxs)(d.a,{stackable:!0,columns:"equal",children:[Object(u.jsx)(d.a.Row,{children:Object(u.jsx)(Ue,{accountPair:y,accountAddress:a})}),Object(u.jsx)("div",{style:{width:"100%",minHeight:"10rem",marginTop:"2rem"},children:Object(u.jsx)(d.a.Row,{children:Object(u.jsx)(oe,{})})}),Object(u.jsx)(d.a.Row,{children:Object(u.jsx)(Le,{accountPair:y})})]})}),Object(u.jsx)(h.a,{}),Object(u.jsx)(x.a,{children:Object(u.jsx)(d.a,{stackable:!0,columns:"equal",children:Object(u.jsxs)(d.a.Row,{stretched:!0,children:[Object(u.jsx)(de,{}),Object(u.jsx)(be,{}),Object(u.jsx)(re,{}),Object(u.jsx)(re,{finalized:!0})]})})}),Object(u.jsx)(Y,{})]})}function Ve(){return Object(u.jsx)(V,{children:Object(u.jsx)(Me,{})})}s.a.render(Object(u.jsx)(Ve,{children:Object(u.jsx)(l,{})}),document.getElementById("root"))}},[[806,1,2]]]);
//# sourceMappingURL=main.89e74a3b.chunk.js.map